{% load go_extras %}
{% load qr_tags %}

<style>
  a.share:link {color:#000000;}
  a.share:visited {color:#000000;}
  a.share:hover {color:#000000;}
  a.share {text-decoration:none;}

  a.button:link {color:#FFF;}
  a.button:visited {color:#FFF;}
  a.button:hover {color:#FFF;}

  legend {
    font-size: inherit;
  }
  pre {
    font-family: inherit;
  }
</style>

<div class="container">
  <div class="col-md-8">
    <h3>Go Address:</h3>
      <a href="{{domain}}{{url.short}}">{{domain}}{{url.short}}</a>
    <br></br>

    <h3>Address Details:</h3>
      <strong>Target URL:</strong>
        <br />
        <a href="{{url.target}}">{{url.target}}</a>
        <br />

      {% if url.owner == request.user.registereduser and request.user.registereduser.approved == True %}
      <strong>Clicks:</strong>
        {{url.clicks}}
      <br />

      <strong>QR Code Uses:</strong> {{url.qrclicks}}
      <br />
      <strong>Social Media Clicks:</strong> {{url.socialclicks}}
      <br />

      <strong>Expires:</strong> {{url.expires|default_if_none:"Never"}}
      <br></br>
      <a class="button btn btn-danger btn-sm fa" data-target="#deletionModal" data-toggle="modal">
        <i class="fa fa-trash-o fa-lg"></i> Delete</a>
      <!-- <a class="button btn btn-danger btn-sm fa" href="{{domain}}delete/{{url.short}}">
        <i class="fa fa-trash-o fa-lg"></i> Delete</a> -->

      <a tabindex="0" class="button btn btn-info btn-sm fa"
        role="button" data-toggle="popover" title="Not Implemented Quite Yet :("
        data-content=
        "We are working on adding this feature in a future
        release of Go. If you'd like to check that progress or potentially
        contribute code, head to git.gmu.edu/srct/go">
        <i class="fa fa-cog"></i> Edit</a>

      <div id="deletionModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h4 class="modal-title" style="font-weight:bold">Are you sure you would like to <a style="color:red">delete</a> {{domain}}{{url.short}}</h4>
                  </div>
                  <div class="modal-body" style="padding-bottom: 80px">
                    <a type="button" class="btn btn-success btn-lg" href="{{domain}}delete/{{url.short}}" style="float:left; width:45%;">Yes, I'm Sure</a>
                    <a type="button" class="btn btn-danger btn-lg" style="float:right; width:45%" data-dismiss="modal">Cancel</a>
                  </div>
              </div>

          </div>
      </div>

      {% endif %}
      <br></br>
  </div>

  <div class="col-md-4">
  {% with domain|add:url.short as the_url %}
    {% with the_url|add:"?qr" as qr_url%}
      {% qr_from_text qr_url 's' %}
    {% endwith %}

    {% with the_url|add:"?social" as social_url %}
      <a class="share" href="http://twitter.com/share?url={{ social_url }}" target="_blank" title="Share via Twitter">
        <i class="fa fa-twitter-square fa-3x"></i>
      </a>

      <a class="share" href="http://www.facebook.com/share.php?u={{ social_url }}" target="_blank" title="Share via Facebook">
        <i class="fa fa-facebook-square fa-3x"></i>
      </a>

      <a class="share" href="https://plus.google.com/share?url={{ social_url }}" target="_blank" title="Share via Google+">
        <i class="fa fa-google-plus-square fa-3x"></i>
      </a>

      <a class="share" href="http://www.linkedin.com/shareArticle?mini=true&amp;url={{ social_url }}&amp;ro=false&amp;summary=&amp;source=" target="_blank" title="Share via LinkedIn">
        <i class="fa fa-linkedin-square fa-3x"></i>
      </a>
    {% endwith %}

    {% with the_url|add:"?qr" as qr_url %}
      <pre><strong>QR Downloads:</strong>
        <a href="http://chart.googleapis.com/chart?cht=qr&chs=268x268&chl={{ qr_url }}" target="_blank">Small (268x268)</a>
        <a href="http://chart.googleapis.com/chart?cht=qr&chs=383x383&chl={{ qr_url }}" target="_blank">Medium (383x383)</a>
        <a href="http://chart.googleapis.com/chart?cht=qr&chs=547x547&chl={{ qr_url }}" target="_blank">Large (547x547)</a>
        </pre>
    {% endwith %}

  {% endwith %}
  </div>
</div>

<script>
  $(function () {
    var option = {'trigger': 'hover'};
    $('[data-toggle="popover"]').popover( option )
  })
</script>
